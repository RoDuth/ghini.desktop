## vim:set ft=mako:
## This file is part of ghini.desktop.
##
## ghini.desktop is free software: you can redistribute it and/or modify
## it under the terms of the GNU General Public License as published by
## the Free Software Foundation, either version 3 of the License, or
## (at your option) any later version.
##
## ghini.desktop is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
## GNU General Public License for more details.
##
## You should have received a copy of the GNU General Public License
## along with ghini.desktop. If not, see <http://www.gnu.org/licenses/>.
##
<%
from bauble.plugins.report import get_species_pertinent_to
%>Generic Hybrid Symbol,Generic Epithet,Specific Hybrid Symbol,Specific Epithet,Infraspecific Rank,Infraspecific Epithet,Cultivar Epithet
% for v in get_species_pertinent_to(values):
<%
    genus = v.genus.genus
    genus_hybrid_marker = ''
    if genus[0] in ['Ã—', 'x']:
        genus_hybrid_marker = 'H'
        genus = genus[1:].strip()
    species_epithet = v.sp or ''
    if species_epithet.startswith('sp.'):
        species_epithet = ''
    sp_hybrid_marker = ''
    if v.hybrid:
        sp_hybrid_marker = 'H'
%>${genus_hybrid_marker},${genus},${sp_hybrid_marker},${species_epithet},${v.infraspecific_rank or ''},${v.infraspecific_epithet or ''},${v.cultivar_epithet or ''}
% endfor
